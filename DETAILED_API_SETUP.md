# ğŸ”‘ Cloudflare API Token è©³ç´°è¨­ç½®æŒ‡å—

## ğŸ“ ç¬¬ä¸€æ­¥ï¼šå‰µå»º Cloudflare API Token

### 1. è¨ªå• Cloudflare API Tokens é é¢
```
https://dash.cloudflare.com/profile/api-tokens
```

### 2. é»æ“Š "Create Token" æŒ‰éˆ•
- ä½æ–¼é é¢å³ä¸Šè§’
- è—è‰²æŒ‰éˆ•ï¼Œå¯«è‘— "Create Token"

### 3. é¸æ“‡ Token æ¨¡æ¿

#### é¸é … Aï¼šä½¿ç”¨ "Edit Cloudflare Workers" æ¨¡æ¿ï¼ˆæ¨è–¦ï¼‰
1. æ‰¾åˆ° "Edit Cloudflare Workers" æ¨¡æ¿
2. é»æ“Šå³å´çš„ "Use template" æŒ‰éˆ•

**ä½†æ˜¯ï¼** é€™å€‹æ¨¡æ¿å¯èƒ½æ¬Šé™ä¸å¤ ï¼Œä½ éœ€è¦æ‰‹å‹•æ·»åŠ æ¬Šé™ï¼š

#### é¸é … Bï¼šè‡ªå®šç¾© Tokenï¼ˆæ¨è–¦ï¼Œå®Œæ•´æ¬Šé™ï¼‰
1. æ»¾å‹•åˆ°é é¢åº•éƒ¨
2. æ‰¾åˆ° "Create Custom Token" 
3. é»æ“Š "Get started" æŒ‰éˆ•

---

## âš™ï¸ ç¬¬äºŒæ­¥ï¼šé…ç½® Token æ¬Šé™

ä½ éœ€è¦è¨­ç½®ä»¥ä¸‹ **4 å€‹æ¬Šé™**ï¼š

### ğŸ“‹ å¿…éœ€çš„æ¬Šé™åˆ—è¡¨

```
âœ… Account:Read          - è®€å–å¸³æˆ¶ä¿¡æ¯
âœ… Zone:Read             - è®€å–å€åŸŸä¿¡æ¯  
âœ… Cloudflare D1:Edit    - ç·¨è¼¯ D1 æ•¸æ“šåº«
âœ… Cloudflare Workers:Edit - ç·¨è¼¯ Workers è…³æœ¬
```

### ğŸ”§ å¦‚ä½•æ·»åŠ é€™äº›æ¬Šé™

#### 1. Account Permissionsï¼ˆå¸³æˆ¶æ¬Šé™ï¼‰
```
é»æ“Š "+ Add more" æˆ–ç¬¬ä¸€å€‹ä¸‹æ‹‰é¸å–®
é¸æ“‡: Account
é¸æ“‡: Account Settings
é¸æ“‡: Read
```

#### 2. Zone Permissionsï¼ˆå€åŸŸæ¬Šé™ï¼‰
```
é»æ“Š "+ Add more"
é¸æ“‡: Zone
é¸æ“‡: Zone
é¸æ“‡: Read
```

#### 3. Account Permissions - D1ï¼ˆæ•¸æ“šåº«æ¬Šé™ï¼‰
```
é»æ“Š "+ Add more"
é¸æ“‡: Account
é¸æ“‡: D1
é¸æ“‡: Edit
```

#### 4. Account Permissions - Workersï¼ˆWorkers æ¬Šé™ï¼‰
```
é»æ“Š "+ Add more"  
é¸æ“‡: Account
é¸æ“‡: Workers Scripts
é¸æ“‡: Edit
```

### ğŸ“¸ å®Œæ•´æ¬Šé™é…ç½®ç¤ºä¾‹

```
Permissions:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Account                                      â”‚
â”‚ â”œâ”€ Account Settings â†’ Read                  â”‚
â”‚ â”œâ”€ D1 â†’ Edit                                â”‚
â”‚ â””â”€ Workers Scripts â†’ Edit                   â”‚
â”‚                                              â”‚
â”‚ Zone                                         â”‚
â”‚ â””â”€ Zone â†’ Read                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ç¬¬ä¸‰æ­¥ï¼šè¨­ç½® Token ç¯„åœ

### Account Resources
```
é¸æ“‡: Include â†’ All accounts
```

### Zone Resources  
```
é¸æ“‡: Include â†’ All zones
ï¼ˆå¦‚æœæ²’æœ‰ zones å¯ä»¥è·³éï¼‰
```

---

## ğŸ“ ç¬¬å››æ­¥ï¼šè¨­ç½® Token åç¨±å’Œ TTL

### Token Name
```
è¼¸å…¥ä¸€å€‹å®¹æ˜“è¨˜ä½çš„åç¨±ï¼š
ä¾‹å¦‚: "MemeLaunch Deployment"
```

### TTL (Time to Live)
```
å»ºè­°é¸æ“‡: Custom
è¨­ç½®: 1 yearï¼ˆ1å¹´ï¼‰

æˆ–è€…é¸æ“‡: Foreverï¼ˆæ°¸ä¹…ï¼‰
```

---

## âœ… ç¬¬äº”æ­¥ï¼šå‰µå»ºä¸¦è¤‡è£½ Token

### 1. é»æ“Šåº•éƒ¨çš„ "Continue to summary" æŒ‰éˆ•

### 2. æª¢æŸ¥æ¬Šé™æ‘˜è¦
ç¢ºèªä½ çœ‹åˆ°ï¼š
```
âœ… Account:Read
âœ… Zone:Read  
âœ… D1:Edit
âœ… Workers Scripts:Edit
```

### 3. é»æ“Š "Create Token" æŒ‰éˆ•

### 4. **é‡è¦ï¼è¤‡è£½ Token**

ä½ æœƒçœ‹åˆ°ä¸€å€‹é é¢é¡¯ç¤ºï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸  This is the only time we'll show you this   â”‚
â”‚    token. Copy it now!                           â”‚
â”‚                                                   â”‚
â”‚ [Token é¡¯ç¤ºåœ¨é€™è£¡ï¼Œé¡ä¼¼ï¼š]                        â”‚
â”‚ abcdefghijklmnopqrstuvwxyz1234567890             â”‚
â”‚                                                   â”‚
â”‚ [Copy] æŒ‰éˆ•                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é»æ“Š "Copy" æŒ‰éˆ•** æˆ–æ‰‹å‹•è¤‡è£½æ•´å€‹ tokenï¼

âš ï¸ **è­¦å‘Š**: Token åªæœƒé¡¯ç¤ºä¸€æ¬¡ï¼é›¢é–‹é é¢å¾Œç„¡æ³•å†çœ‹åˆ°ï¼

---

## ğŸ“Œ ç¬¬å…­æ­¥ï¼šåœ¨ GenSpark ä¸­è¨­ç½® Token

### æ–¹æ³• 1ï¼šé€šé GenSpark Deploy æ¨™ç±¤é 

#### GenSpark Deploy æ¨™ç±¤é åœ¨å“ªè£¡ï¼Ÿ

```
1. æŸ¥çœ‹ GenSpark ç•Œé¢çš„ **å·¦å´é‚Šæ¬„**
2. æ‰¾åˆ°ä¸¦é»æ“Š "Deploy" æˆ– "éƒ¨ç½²" é¸é …
   (å¯èƒ½çš„åœ–æ¨™: ğŸš€ æˆ– ğŸ“¦)
3. åœ¨ Deploy é é¢ä¸­æ‰¾åˆ° "Cloudflare API Key" è¨­ç½®å€åŸŸ
4. ç²˜è²¼ä½ è¤‡è£½çš„ token
5. é»æ“Š "Save" æˆ– "ä¿å­˜"
```

#### å¦‚æœæ‰¾ä¸åˆ° Deploy æ¨™ç±¤é ï¼š

**A. æª¢æŸ¥æ˜¯å¦æœ‰é€™äº›åç¨±ï¼š**
- "Deploy"
- "éƒ¨ç½²"
- "Deployment"
- "Settings" â†’ "Deployment"
- "é…ç½®" â†’ "éƒ¨ç½²è¨­ç½®"

**B. æŸ¥çœ‹æ˜¯å¦åœ¨ï¼š**
- å·¦å´é‚Šæ¬„
- é ‚éƒ¨èœå–®
- é …ç›®è¨­ç½®ä¸­

**C. å¦‚æœé‚„æ˜¯æ‰¾ä¸åˆ°ï¼Œä½¿ç”¨æ–¹æ³• 2**

---

### æ–¹æ³• 2ï¼šé€šéç’°å¢ƒè®Šæ•¸è¨­ç½®ï¼ˆå‚™ç”¨æ–¹æ¡ˆï¼‰

å¦‚æœæ‰¾ä¸åˆ° Deploy æ¨™ç±¤é ï¼Œå¯ä»¥åœ¨ terminal ä¸­è¨­ç½®ï¼š

```bash
# æ–¹å¼ A: ä½¿ç”¨ wrangler login
npx wrangler login

# é€™æœƒæ‰“é–‹ç€è¦½å™¨è®“ä½ ç™»éŒ„ Cloudflare

# æ–¹å¼ B: ç›´æ¥è¨­ç½® token
export CLOUDFLARE_API_TOKEN="ä½ è¤‡è£½çš„-token"

# ç„¶å¾Œæ¸¬è©¦
npx wrangler whoami
```

---

## ğŸ§ª ç¬¬ä¸ƒæ­¥ï¼šé©—è­‰ Token

é‹è¡Œä»¥ä¸‹å‘½ä»¤æ¸¬è©¦ï¼š

```bash
npx wrangler whoami
```

**æˆåŠŸçš„è¼¸å‡ºæ‡‰è©²æ˜¯ï¼š**
```
 â›…ï¸ wrangler 4.x.x
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Getting User settings...
ğŸ‘‹ You are logged in with an API Token, associated with the email 'your-email@example.com'.

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Account Name             â”‚ Account ID                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Your Account Name        â”‚ abc123...                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¦‚æœçœ‹åˆ°éŒ¯èª¤ï¼š**
```
âŒ Authentication error
```

èªªæ˜ï¼š
1. Token å¯èƒ½æ²’æœ‰æ­£ç¢ºè¤‡è£½
2. Token æ¬Šé™ä¸è¶³
3. Token æ²’æœ‰æ­£ç¢ºè¨­ç½®

---

## ğŸ” æ•…éšœæ’é™¤

### å•é¡Œ 1: "Authentication error"
**è§£æ±ºæ–¹æ¡ˆï¼š**
- é‡æ–°å‰µå»º token
- ç¢ºä¿è¤‡è£½å®Œæ•´çš„ token
- æª¢æŸ¥æ¬Šé™æ˜¯å¦åŒ…å«æ‰€æœ‰ 4 é …

### å•é¡Œ 2: "æ‰¾ä¸åˆ° Deploy æ¨™ç±¤é "
**è§£æ±ºæ–¹æ¡ˆï¼š**
- ä½¿ç”¨ `npx wrangler login` ç™»éŒ„
- æˆ–ä½¿ç”¨ç’°å¢ƒè®Šæ•¸è¨­ç½® token

### å•é¡Œ 3: "Permission denied" éŒ¯èª¤
**è§£æ±ºæ–¹æ¡ˆï¼š**
- Token æ¬Šé™ä¸è¶³
- é‡æ–°å‰µå»º token ä¸¦æ·»åŠ æ‰€æœ‰å¿…éœ€æ¬Šé™
- ç‰¹åˆ¥æª¢æŸ¥ D1:Edit å’Œ Workers Scripts:Edit

### å•é¡Œ 4: Token éæœŸ
**è§£æ±ºæ–¹æ¡ˆï¼š**
- å‰µå»ºæ–° token
- è¨­ç½®æ›´é•·çš„ TTLï¼ˆ1å¹´æˆ–æ°¸ä¹…ï¼‰

---

## ğŸ“‹ å®Œæ•´æ¬Šé™æª¢æŸ¥æ¸…å–®

å‰µå»º token æ™‚ç¢ºä¿é¸ä¸­ï¼š

```
â–¡ Account â†’ Account Settings â†’ Read
â–¡ Account â†’ D1 â†’ Edit  
â–¡ Account â†’ Workers Scripts â†’ Edit
â–¡ Zone â†’ Zone â†’ Read
â–¡ Account Resources: Include â†’ All accounts
â–¡ TTL: 1 year æˆ– Forever
```

---

## ğŸ¯ å¿«é€Ÿåƒè€ƒ

### å‰µå»º Token URL
```
https://dash.cloudflare.com/profile/api-tokens
```

### å¿…éœ€æ¬Šé™ï¼ˆ4é …ï¼‰
```
1. Account:Read
2. Zone:Read
3. D1:Edit
4. Workers Scripts:Edit
```

### é©—è­‰å‘½ä»¤
```bash
npx wrangler whoami
```

### è¨­ç½®ç’°å¢ƒè®Šæ•¸
```bash
export CLOUDFLARE_API_TOKEN="ä½ çš„token"
```

---

## ğŸ’¡ æç¤º

1. **ä¿å­˜ Token**: è¤‡è£½å¾Œç«‹å³ä¿å­˜åˆ°å®‰å…¨çš„åœ°æ–¹ï¼ˆå¯†ç¢¼ç®¡ç†å™¨ï¼‰
2. **ä¸è¦åˆ†äº«**: Token ç­‰åŒæ–¼å¯†ç¢¼ï¼Œä¸è¦åˆ†äº«çµ¦ä»»ä½•äºº
3. **å®šæœŸæ›´æ–°**: å»ºè­°æ¯å¹´æ›´æ–°ä¸€æ¬¡ token
4. **å¤šå€‹ Token**: å¯ä»¥ç‚ºä¸åŒé …ç›®å‰µå»ºä¸åŒçš„ token

---

## âœ… è¨­ç½®å®Œæˆå¾Œ

é‹è¡Œéƒ¨ç½²è…³æœ¬ï¼š

```bash
cd /home/user/webapp
./deploy-helper.sh
```

å¦‚æœé©—è­‰é€šéï¼Œè…³æœ¬æœƒç¹¼çºŒéƒ¨ç½²æµç¨‹ï¼

---

**é‚„æœ‰å•é¡Œå—ï¼Ÿç›´æ¥å•æˆ‘ï¼æˆ‘æœƒå¹«ä½ ä¸€æ­¥æ­¥è§£æ±ºï¼** ğŸš€
