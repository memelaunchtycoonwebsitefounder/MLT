# 🎮 MemeLaunch Tycoon - 遊戲化Meme幣系統設計

## 🎯 核心概念

這是一個**單人可玩的Meme幣模擬遊戲**，通過AI驅動的市場事件和機率系統，讓用戶即使獨自一人也能體驗完整的Meme幣創建和交易樂趣。

---

## 💰 統一貨幣系統：MLT (MemeLaunch Token)

### 移除金幣，MLT成為唯一貨幣

**原系統**：
- ❌ 金幣（virtual_balance）- 用於買賣Meme幣
- ❌ MLT（mlt_balance）- 用於創幣

**新系統**：
- ✅ **只有MLT** - 統一貨幣
- ✅ 創幣需要MLT
- ✅ 交易Meme幣使用MLT
- ✅ 買賣Meme幣賺取/消耗MLT

### MLT用途

1. **創建Meme幣**：用戶設定初始投資（最低1,800 MLT）
2. **購買Meme幣**：用MLT購買任何Meme幣
3. **出售Meme幣**：賣出Meme幣換回MLT
4. **交易手續費**：每筆交易1% MLT手續費

---

## 🚀 創幣流程重新設計

### 步驟1：上傳圖片（不變）

### 步驟2：設置幣種參數

**必填項**：
- 幣種名稱
- 幣種符號
- **初始MLT投資**（新增，最低1,800 MLT）
- 總供應量

**可選項**：
- 描述
- Twitter/Telegram/Website

### 步驟3：預購買要求（新增）

**強制預購**：
- 用戶必須購買至少價值 **100 MLT** 的自己創建的幣
- 這確保創建者對自己的幣有信心
- 計算公式：
  ```
  初始價格 = 初始MLT投資 / 總供應量
  最少購買數量 = 100 MLT / 初始價格
  ```

**例子**：
```
用戶投資: 2,000 MLT
總供應量: 1,000,000 幣
初始價格: 2,000 / 1,000,000 = 0.002 MLT/幣
必須購買: 100 / 0.002 = 50,000 幣

總成本: 2,000 MLT (創幣) + 100 MLT (預購) = 2,100 MLT
```

### 步驟4：發射

- 扣除總成本
- 創建幣種
- 自動購買指定數量
- 啟動AI市場模擬系統

---

## 🎲 AI驅動的市場事件系統

### 事件機率設計

每個新創建的Meme幣會被分配一個"命運"，由以下機率決定：

#### 1. 生存機率（基礎）

| 時間點 | 生存機率 | 說明 |
|--------|---------|------|
| 創建時 | 100% | 所有幣都能創建 |
| 5分鐘後 | 65% | 35%的幣會"死亡"（歸零） |
| 10分鐘後 | 45% | 只有45%能活過10分鐘 |
| 30分鐘後 | 30% | 30%成為"穩定幣" |
| 1小時後 | 20% | 20%成為"活躍幣" |
| 24小時後 | 5% | 5%成為"明星幣" |

#### 2. Bonding Curve進度機率

| 進度 | 機率 | 說明 |
|------|------|------|
| 0-10% | 40% | 大部分幣停留在低進度 |
| 10-30% | 30% | 有一定買盤 |
| 30-50% | 15% | 中等成功 |
| 50-80% | 10% | 較為成功 |
| 80-100% | 5% | 極少數"登月"幣 |

#### 3. 市場事件機率

| 事件 | 機率 | 影響 |
|------|------|------|
| **狙擊交易** | 80% | 創建後30秒內大量買入 |
| **Rug Pull** | 35% | 流動性突然撤出，幣價暴跌 |
| **巨鯨買入** | 20% | 10分鐘後大戶買入 |
| **恐慌拋售** | 25% | 突然大量賣出 |
| **FOMO買入** | 15% | 散戶瘋狂跟進 |
| **穩定增長** | 10% | 緩慢持續上漲 |
| **病毒傳播** | 5% | 突然爆紅，價格飆升 |

#### 4. AI交易者類型

**狙擊手（Sniper）**：
- 在創建後5-30秒買入
- 買入量：初始供應的1-5%
- 持有時間：1-5分鐘
- 退出方式：快速拋售

**巨鯨（Whale）**：
- 在創建後5-20分鐘買入
- 買入量：初始供應的5-15%
- 持有時間：10-60分鐘
- 退出方式：分批賣出

**散戶（Retail）**：
- 隨機時間買入
- 買入量：初始供應的0.1-1%
- 持有時間：不定
- 退出方式：看心情

**機器人（Bot）**：
- 持續小額交易
- 買入/賣出量：初始供應的0.01-0.1%
- 頻率：每1-5分鐘
- 模式：隨機

**做莊者（Market Maker）**：
- 提供雙向報價
- 維持市場流動性
- 盈利方式：買賣價差

---

## 📊 價格計算機制

### Bonding Curve公式

使用**指數曲線**模擬真實Meme幣的瘋狂漲幅：

```
當前價格 = 初始價格 × e^(k × 進度)

其中:
- 初始價格 = 初始MLT投資 / 總供應量
- 進度 = 已購買量 / 總供應量 (0-1)
- k = 增長係數（建議值：3-5，決定漲幅）
- e = 自然對數底數（約2.718）
```

**例子**：
```
初始價格: 0.001 MLT/幣
k = 4
進度 10%: 0.001 × e^(4×0.1) = 0.0015 MLT/幣 (+50%)
進度 50%: 0.001 × e^(4×0.5) = 0.0074 MLT/幣 (+640%)
進度 100%: 0.001 × e^(4×1.0) = 0.0546 MLT/幣 (+5360%)
```

### 市場影響因子

實際價格會受以下因素調整：

```
實際價格 = 基礎價格 × 市場影響因子

市場影響因子 = 
  (1 + 炒作分數/100) ×        // 炒作越高，溢價越高
  (1 + 持有人數/1000) ×       // 持有人越多，越穩定
  (1 - 拋售壓力/100)          // 拋售壓力越大，折價越多
```

---

## 🎮 AI交易模擬系統

### 系統架構

```
創建Meme幣
    ↓
分配"命運"（根據機率）
    ↓
啟動事件調度器
    ↓
定時觸發AI交易事件
    ↓
更新價格、持有人、交易歷史
    ↓
用戶可以參與交易
```

### 事件調度

**時間軸示例**：
```
T+0s:    創建幣種
T+5s:    80%機率 - 狙擊手買入
T+30s:   狙擊手開始拋售
T+2m:    35%機率 - Rug Pull事件
T+5m:    隨機散戶買入
T+10m:   20%機率 - 巨鯨買入
T+15m:   FOMO買入或恐慌拋售
T+30m:   檢查生存狀態
```

### 用戶交易優先級

**當用戶參與交易時**：
- 用戶交易 > AI交易
- 用戶交易會真實影響價格
- 當某幣有 >10 個真實用戶交易時，暫停AI模擬
- 真實交易量超過AI交易量時，切換為真實市場模式

---

## 🎯 遊戲化機制

### 每日創幣限制（後續添加）

```
用戶等級 1-5:   每天創建 3 個幣
用戶等級 6-10:  每天創建 5 個幣
用戶等級 11-20: 每天創建 10 個幣
VIP用戶:        每天創建 20 個幣
```

### 成就系統（與創幣相關）

- 🚀 **首次發射**: 創建第一個Meme幣
- 💎 **鑽石手**: 持有幣種超過24小時
- 📈 **登月**: 創建的幣達到100% Bonding Curve
- 💀 **幣圈韭菜**: 創建的幣在5分鐘內歸零
- 🐋 **巨鯨**: 單次買入價值 >1000 MLT
- 🔥 **病毒傳播**: 創建的幣被超過100人交易

### 排行榜

- 最高市值Meme幣
- 最多持有人Meme幣
- 最高投資回報率
- 最快登月速度

---

## 🔧 技術實現優先級

### 第一階段：基礎重構（當前）

1. ✅ 移除金幣系統
2. ✅ MLT成為唯一貨幣
3. ✅ 更新創幣流程（初始投資 + 預購）
4. ✅ 更新所有API使用MLT

### 第二階段：AI市場系統

1. ⏳ 實現Bonding Curve價格計算
2. ⏳ 創建事件調度器
3. ⏳ 實現AI交易者
4. ⏳ 實現市場事件系統

### 第三階段：進階功能

1. ⏳ 每日創幣限制
2. ⏳ 流動性池系統
3. ⏳ 公開交易歷史
4. ⏳ 實時通知系統

---

## 📊 數據庫更新需求

### 表結構修改

**coins表**：
```sql
-- 新增字段
initial_mlt_investment REAL,        -- 初始MLT投資
bonding_curve_progress REAL,        -- Bonding Curve進度 (0-1)
destiny_type TEXT,                  -- 命運類型 ('moon', 'stable', 'dead', 'rug')
event_schedule TEXT,                -- 事件調度（JSON）
ai_controlled BOOLEAN DEFAULT 1,    -- 是否AI控制（>10真實用戶則關閉）
```

**transactions表**：
```sql
-- 修改
amount REAL,              -- 交易金額（MLT）
coin_amount REAL,         -- 幣數量
is_ai_trade BOOLEAN,      -- 是否AI交易
trader_type TEXT,         -- 交易者類型 ('user', 'sniper', 'whale', 'retail', 'bot')
```

**users表**：
```sql
-- 移除
-- virtual_balance (金幣) ← 刪除

-- 只保留
mlt_balance REAL,         -- MLT餘額
```

---

## 🎨 UI更新需求

### 創幣頁面

**Step 2新增**：
```
┌─────────────────────────────────────┐
│ 初始MLT投資                          │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│ [滑動條: 1,800 - 10,000 MLT]        │
│ 當前: 2,000 MLT                     │
│                                     │
│ 📊 預覽                             │
│ • 總供應量: 1,000,000 幣            │
│ • 初始價格: 0.002 MLT/幣            │
│ • 必須預購: 50,000 幣 (100 MLT)     │
│ • 總成本: 2,100 MLT                 │
└─────────────────────────────────────┘
```

### 幣種詳情頁面

**新增AI活動指示器**：
```
┌─────────────────────────────────────┐
│ 🤖 AI市場活動                       │
│ • 5個AI交易者活躍中                 │
│ • 下次事件: 2分鐘後                 │
│ • 命運: 🌟 潛力幣                   │
└─────────────────────────────────────┘
```

---

## 🎯 下一步行動

1. **立即開始**：移除金幣系統，統一為MLT
2. **更新創幣流程**：添加初始投資和預購邏輯
3. **實現Bonding Curve**：價格計算公式
4. **創建AI系統**：事件調度和AI交易者

**您希望我立即開始重構嗎？我可以：**
1. 更新資料庫遷移（移除金幣）
2. 修改創幣API和UI
3. 實現Bonding Curve價格系統
4. 創建AI事件調度器

請確認我是否理解正確，然後我立即開始實施！🚀
